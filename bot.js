const Discord = require('discord.js');
const client = new Discord.Client();

client.on('ready', () => {
  console.log(`Logged in as ${client.user.tag}!`);
  client.user.setGame("#ENFELATEH..","https://www.twitch.tv/idk");
});


var prefix = "!" // Ø§Ù„Ø¨Ø±ÙÙƒØ³
client.on("message", (message) => {
    if (message.author.bot) return;
    if (0 != message.content.indexOf(prefix)) return;
    const [command, ...args] = message.content.slice(prefix.length).split(/ +/g);
    if (command === "role") { // ØºÙŠØ± Ø§Ø³Ù… Ø§Ù„Ø§Ù…Ø± Ù…Ù† Ù‡Ù†Ø§
        let freeRole = message.guild.roles.find(role => role.name == "Ø§Ø³Ù… Ø§Ù„Ø±ÙˆÙ„ Ø§Ù„ÙŠ Ø±Ø§Ø­ ÙŠØ§Ø®Ø°Ù‡ Ù…Ù† Ø§Ù„Ø§Ù…Ø±");
        if (!freeRole) return message.reply("Hey, this role seems to be deleted i can\'t find it");
        if (message.member.roles.some(role => role.name == freeRole.name)) {
            message.member.removeRole(freeRole).then(() => {
                message.reply("the role removed !")
            })
            .catch(() => {
                message.reply("something went wrong, i can\'t remove the role from you.")
            });;
        } else {
            message.member.addRole(freeRole)
                .then(() => {
                    message.reply("you got it!")
                })
                .catch(() => {
                    message.reply("something went wrong, i can\'t give you the role.")
                });
        }
    }
});


client.on('message', message => {  
    if (message.author.bot) return;
if (message.content.startsWith('!clear')) { //Codes
    if(!message.channel.guild) return message.reply('â›” | This Command For Servers Only!'); 
        if(!message.member.hasPermission('MANAGE_MESSAGES')) return message.channel.send('â›” | You dont have **MANAGE_MESSAGES** Permission!');
        if(!message.guild.member(client.user).hasPermission('MANAGE_MESSAGES')) return message.channel.send('â›” | I dont have **MANAGE_MESSAGES** Permission!');
 let args = message.content.split(" ").slice(1)
    let messagecount = parseInt(args);
    if (args > 99) return message.reply("**ğŸ›‘ || ÙŠØ¬Ø¨ Ø§Ù† ÙŠÙƒÙˆÙ† Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø³Ø­ Ø£Ù‚Ù„ Ù…Ù† 100 .**").then(messages => messages.delete(5000))
    if(!messagecount) args = '100';
    message.channel.fetchMessages({limit: messagecount + 1}).then(messages => message.channel.bulkDelete(messages));
    message.channel.send(`\`${args}\` : __Ø¹Ø¯Ø¯ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„ØªÙŠ ØªÙ… Ù…Ø³Ø­Ù‡Ø§ __ `).then(messages => messages.delete(5000));
  }
  });


client.on('message' , message => {
  if(message.author.bot) return;
  if(message.content.startsWith("!ping")) {
 message.channel.send('pong').then((msg) => {
var PinG = `${Date.now() - msg.createdTimestamp}`
var ApL = `${Math.round(client.ping)}`
      msg.edit(`\`\`\`javascript\nTime taken: ${PinG} ms.\nDiscord API: ${ApL} ms.\`\`\``);
 })
  }  
 });


client.on('guildMemberAdd', member => {

    const channel = member.guild.channels.find('name', 'ãƒ»text');
  
    const millis = new Date().getTime() - member.user.createdAt.getTime();
    const now = new Date();
    const createdAt = millis / 1000 / 60 / 60 / 24;




  
    const embed = new Discord.RichEmbed()
    
    .setColor("black")
    .setDescription(`**ØªØ§Ø±ÙŠØ® Ø¯Ø®ÙˆÙ„Ùƒ Ù„Ù„Ø¯Ø³ÙƒÙˆØ±Ø¯ Ù…Ù†Ø° ${createdAt.toFixed(0)} ÙŠÙˆÙ…**`)
    .setAuthor(member.user.tag, member.user.avatarURL);
    channel.sendEmbed(embed);

  
});


client.on('message', message => {
if(!message.channel.guild) return;
if(message.content.startsWith('Ø§Ø³Ø­Ø¨')) {
 if (message.member.hasPermission("MOVE_MEMBERS")) {
 if (message.mentions.users.size === 0) {
}
if (message.member.voiceChannel != null) {
 if (message.mentions.members.first().voiceChannel != null) {
 var authorchannel = message.member.voiceChannelID;
 var usermentioned = message.mentions.members.first().id;
var embed = new Discord.RichEmbed()
 .setTitle("Succes!")
 .setColor("#000000")
 .setDescription(`:white_check_mark: <@${usermentioned}> Moved. `)
var embed = new Discord.RichEmbed()
.setTitle(`You are Moved in ${message.guild.name}`)
 .setColor("RANDOM")
.setDescription(`**<@${message.author.id}> Moved You To His Channel!\nServer --> ${message.guild.name}**`)
 message.guild.members.get(usermentioned).setVoiceChannel(authorchannel).then(m => message.channel.send(embed))
message.guild.members.get(usermentioned).send(embed)
} else {
message.channel.send("``Ù„Ø§ ØªØ³ØªØ·ÙŠØ¹ Ø³Ø­Ø¨ "+ message.mentions.members.first() +" `ÙŠØ¬Ø¨ Ø§Ù† ÙŠÙƒÙˆÙ† Ù‡Ø°Ù‡ Ø§Ù„Ø¹Ø¶Ùˆ ÙÙŠ Ø±ÙˆÙ… ØµÙˆØªÙŠ`")
}
} else {
 message.channel.send("**``ÙŠØ¬Ø¨ Ø§Ù† ØªÙƒÙˆÙ† ÙÙŠ Ø±ÙˆÙ… ØµÙˆØªÙŠ Ù„ÙƒÙŠ ØªÙ‚ÙˆÙ… Ø¨Ø³Ø­Ø¨ Ø§Ù„Ø¹Ø¶Ùˆ Ø£Ù„ÙŠÙƒ``**")
}
} else {
message.react("âŒ")
 }}});


client.login(process.env.BOT_TOKEN); //
